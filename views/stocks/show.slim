h1#show-head åœ¨åº«ä¸€è¦§
form.uk-form action="#"
  button.new = 'æ–°è¦ç™»éŒ²'
form.uk-form#search action="#"
  input type="text" name="search" value="" id="id-search"
    = ' ğŸ”æ¤œç´¢'
table.uk-table#sortable
  thead
    tr
      th pid â–²â–¼
      th loc â–²â–¼
      th num â–²â–¼
      th command
  tbody
    - @res.each do |data|
      tr
        - id  = data['pid'].to_s
        - loc = data['loc'].to_s.split(' ')[0]
        - num = data['num'].to_s
        td#data = id
        td#data = loc
        td#data = num
        td#command
          div id="#{id}" loc="#{loc}" num="#{num}"
            button.uk-button.uk-button-success.edit = 'ç·¨é›†'
            button.uk-button.uk-button-danger.delete = 'å‰Šé™¤'
.uk-modal#edit
  .uk-modal-dialog
    a.uk-modal-close.uk-close
    form.uk-form#modal method="post" action="/cgi-bin/DBE/index.cgi/stocks/update"
      legend åœ¨åº«æƒ…å ± æ›´æ–°
      fieldset
        .uk-form-row
          .pid#stock name="pid" value=""
        .uk-form-row
          label = "loc"
          input.loc#stock type="text" name="loc" value=""
        .uk-form-row
          label = "num"
          input.num#stock type="text" name="num" value=""
        .uk-form-row
          button#in-modal.uk-button.uk-button-primary
            = 'æ›´æ–°'
.uk-modal#new
  .uk-modal-dialog
    a.uk-modal-close.uk-close
    form.uk-form#modal method="post" action="/cgi-bin/DBE/index.cgi/stocks/create"
      legend åœ¨åº«æƒ…å ± ç™»éŒ²
      fieldset
        .uk-form-row
          label = "pid"
          input type="text" name="pid" value=""
        .uk-form-row
          label = "loc"
          input type="text" name="loc" value=""
        .uk-form-row
          label = "num"
          input type="text" name="num" value=""
        .uk-form-row
          button#in-modal.uk-button.uk-button-primary
            = 'ç™»éŒ²'
javascript:
  $('.new').click(function() { UIkit.modal('#new').show() });
  $('.edit').click(function() {
    var el = $(this).parent();
    $('.pid#stock').val(el.attr('id'));
    $('input.loc#stock').val(el.attr('loc'));
    $('input.num#stock').val(el.attr('num'));
    UIkit.modal('#edit').show()
  });
  $('.delete').click(function() {
    var el = $(this).parent();
    UIkit.modal.confirm("æœ¬å½“ã«å‰Šé™¤ã—ã¦ã‚‚è‰¯ã„ã§ã™ã‹?", function() {
      $.post('/cgi-bin/DBE/index.cgi/stocks/delete', {
        id: el.attr('id')
      }, function() { el.parent().parent().fadeOut(200); });
    });
  });
  $('input#id-search').quicksearch('table tbody tr');
  $('#sortable').tablesorter({
    headers: { 3: {sorter:false} }
  });

